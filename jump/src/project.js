require=function e(t,c,o){function i(n,a){if(!c[n]){if(!t[n]){var s="function"==typeof require&&require;if(!a&&s)return s(n,!0);if(r)return r(n,!0);var d=new Error("Cannot find module '"+n+"'");throw d.code="MODULE_NOT_FOUND",d}var h=c[n]={exports:{}};t[n][0].call(h.exports,function(e){var c=t[n][1][e];return i(c||e)},h,h.exports,e,t,c,o)}return c[n].exports}for(var r="function"==typeof require&&require,n=0;n<o.length;n++)i(o[n]);return i}({cameraControl:[function(e,t,c){"use strict";cc._RF.push(t,"97e19aCWxtKaILrO6S3Hy63","cameraControl"),cc.Class({extends:cc.Component,properties:{target:{default:null,type:cc.Node}},onLoad:function(){},moveCamera:function(e,t){console.log("moveCamera");var c=null;1===e?c=cc.p(this.target.x+200,this.target.y+t.y):-1===e&&(c=cc.p(this.target.x-200,this.target.y+t.y));var o=cc.moveTo(.5,c);this.node.runAction(o)}}),cc._RF.pop()},{}],game:[function(e,t,c){"use strict";cc._RF.push(t,"16dcfcHYAhAi4maI2dCnYVj","game"),cc.Class({extends:cc.Component,properties:{player:{default:null,type:cc.Node},cameraNode:{default:null,type:cc.Node},stageRootNode:{default:null,type:cc.Node},stagePrefab:{default:null,type:cc.Prefab},checkGameNode:{default:null,type:cc.Node},initSpeed:150,power:600,radio:.5560472,stageLeftOrg:cc.p(-140,-420)},onLoad:function(){this.cameraScript=this.cameraNode.getComponent("cameraControl"),this.isPushScreen=!1,this.speed=0,this.addX=0,this.direction=1,this.stageNodeArr=new Array,this.curStage=void 0,this.addStage(),this.addPlayer(),this.addStage(),this.node.on(cc.Node.EventType.TOUCH_START,function(e){this.isPushScreen=!0,this.speed=this.initSpeed,this.addX=0,this.player.stopAllActions(),this.player.runAction(cc.scaleTo(2,1,.5))},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){this.isPushScreen=!1,this.player.stopAllActions(),this.player.runAction(cc.scaleTo(.5,1,1)),this.jump()},this)},update:function(e){this.isPushScreen&&(this.speed+=this.power*e,this.addX+=this.speed*e)},jump:function(){var e=this.player.getPosition(),t=this.node.convertToWorldSpaceAR(e);e.x+=this.addX*this.direction,e.y+=this.addX*this.radio;var c=this.node.convertToWorldSpaceAR(e),o=!1;this.curStage.getComponent("stage").isJumpOnStage(c,this.direction)?(t.x=c.x-t.x,t.y=c.y-t.y,e=this.node.convertToNodeSpaceAR(c)):o=!0;var i=cc.jumpTo(.5,e,200,1),r=cc.rotateBy(.5,360*this.direction),n=cc.spawn(i,r),a=cc.callFunc(function(){o?this.gameOverShow():(this.direction=Math.random()<.5?-1:1,this.addStage(),this.cameraScript.moveCamera(this.direction,t),this.removeNotUseStage())}.bind(this)),s=(cc.delayTime(1),cc.sequence(n,a));this.player.runAction(s)},addStage:function(){var e=cc.instantiate(this.stagePrefab);e.getComponent("stage").setSpriteFrame(),e.parent=this.stageRootNode,this.stageNodeArr.push(e);var t=null;if(void 0===this.curStage)t=this.stageLeftOrg;else{var c=250+200*Math.random();(t=this.curStage.position).x+=c*this.direction,t.y+=c*this.radio}this.curStage=e,e.position=t},addPlayer:function(){var e=this.curStage.getChildByName("mid").convertToWorldSpaceAR(cc.p(0,0)),t=this.node.convertToNodeSpaceAR(e);this.player.position=t},gameOverShow:function(){this.checkGameNode.active=!0},onGameAgain:function(){cc.director.loadScene("gameScene")},removeNotUseStage:function(){for(var e=0;e<this.stageNodeArr.length;e++){var t=this.stageNodeArr[e];cc.log("stage node y:",t.y),this.cameraNode.y-t.y>800&&(this.stageNodeArr.splice(e,1),e--,t.destroy(),cc.log("stage count:",this.stageNodeArr.length))}}}),cc._RF.pop()},{}],player:[function(e,t,c){"use strict";cc._RF.push(t,"ffd2cjpU1VASKY3HnjdFsuS","player"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],stage:[function(e,t,c){"use strict";cc._RF.push(t,"03f790mwzpP3rAR9ZqGRn1/","stage"),cc.Class({extends:cc.Component,properties:{spriteFrames:{default:[],type:cc.SpriteFrame},icon:{default:null,type:cc.Node}},onLoad:function(){this.mid=this.node.getChildByName("mid"),this.up=this.node.getChildByName("up"),this.down=this.node.getChildByName("down"),this.left=this.node.getChildByName("left"),this.right=this.node.getChildByName("right")},setSpriteFrame:function(){this.icon.getComponent(cc.Sprite).spriteFrame=this.spriteFrames[Math.floor(3*Math.random())]},isJumpOnStage:function(e,t){var c=this.mid.convertToWorldSpaceAR(cc.p(0,0)),o=cc.pSub(e,c),i=cc.pLength(o),r=c;if(1===t){var n=this.up.convertToWorldSpaceAR(cc.p(0,0));o=cc.pSub(e,n),i>(d=cc.pLength(o))&&(i=d,r=n);var a=this.down.convertToWorldSpaceAR(cc.p(0,0));o=cc.pSub(e,a),i>(d=cc.pLength(o))&&(i=d,r=a)}else{var s=this.left.convertToWorldSpaceAR(cc.p(0,0));o=cc.pSub(e,s);var d=cc.pLength(o);i>d&&(i=d,r=s);var h=this.right.convertToWorldSpaceAR(cc.p(0,0));o=cc.pSub(e,h),i>(d=cc.pLength(o))&&(i=d,r=h)}return o=cc.pSub(e,r),cc.pLength(o)<100&&(e.x=r.x,e.y=r.y,!0)}}),cc._RF.pop()},{}]},{},["cameraControl","game","player","stage"]);