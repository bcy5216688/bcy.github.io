require=function e(n,c,o){function r(t,u){if(!c[t]){if(!n[t]){var a="function"==typeof require&&require;if(!u&&a)return a(t,!0);if(s)return s(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var l=c[t]={exports:{}};n[t][0].call(l.exports,function(e){var c=n[t][1][e];return r(c||e)},l,l.exports,e,n,c,o)}return c[t].exports}for(var s="function"==typeof require&&require,t=0;t<o.length;t++)r(o[t]);return r}({Color:[function(e,n,c){"use strict";cc._RF.push(n,"86229+LE8NCr60Zrg7lKcTZ","Color"),n.exports={startBg:new cc.color(89,69,61,255),overBg:new cc.color(89,69,61,255),gameBg:new cc.color(89,69,61,255),topBg:new cc.color(166,137,124,255),tileBg:new cc.color(166,137,124,255),powerBarBg:new cc.color(166,137,124,255),power:new cc.color(100,107,48,255),num1:new cc.color(217,202,184,255),num2:new cc.color(191,177,159,255),num3:new cc.color(166,133,104,255),num4:new cc.color(115,86,69,255),num5:new cc.color(64,40,32,255),num6:new cc.color(115,100,56,255),num7:new cc.color(140,89,70,255),num8:new cc.color(115,56,50,255),num9:new cc.color(115,32,32,255),num10:new cc.color(115,103,88,255),num11:new cc.color(140,121,97,255),num12:new cc.color(191,146,107,255),num13:new cc.color(191,140,11,255),num14:new cc.color(213,185,112,255),num15:new cc.color(174,122,98,255),num16:new cc.color(181,91,82,255),num17:new cc.color(107,86,85,255),num18:new cc.color(73,58,61,255),num19:new cc.color(176,125,98,255),num20:new cc.color(232,171,127,255),nums:new cc.color(222,153,36,255)},cc._RF.pop()},{}],GameOver:[function(e,n,c){"use strict";cc._RF.push(n,"7cad7G35CVDqZK3i1qKHslq","GameOver"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],Game:[function(e,n,c){"use strict";cc._RF.push(n,"0a4c07YeX5KJ4kv6/6fE2kT","Game"),cc.Class({extends:cc.Component,properties:{squarePre:{default:null,type:cc.Prefab},squareBg:{default:null,type:cc.Node}},onLoad:function(){this.squares=[[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null],[null,null,null,null,null]],this.checkArr=[],this.spawnSquares()},spawnSquares:function(){for(var e=0;e<5;e++)for(var n=0;n<5;n++)if(null==this.squares[e][n]){var c=cc.instantiate(this.squarePre);this.squareBg.addChild(c);var o=c.getComponent("Square");o.game=this,this.squares[e][n]=c;for(var r=1;;){var s=new Array,t=new Array;if(r=parseInt(7*Math.random()+1),o.num=r,this.scanAroundNum(r,e,n,s,t),s.length<3)break}o.setNum(parseInt(r),!1),o.newSquare(e,n)}},scanAroundNum:function(e,n,c,o,r){if(null!=this.squares[n][c]){void 0==r&&(r=new Array);var s=!1;if(-1==r.indexOf(n+"#"+c)){if(r.push(n+"#"+c),n<4&&null!=this.squares[n+1][c]&&e==(t=this.squares[n+1][c].getComponent("Square").num)&&(-1==o.indexOf(n+"#"+c)&&o.push(n+"#"+c),this.scanAroundNum(e,n+1,c,o,r),s=!0),n>0&&null!=this.squares[n-1][c]&&e==(t=this.squares[n-1][c].getComponent("Square").num)&&(-1==o.indexOf(n+"#"+c)&&o.push(n+"#"+c),this.scanAroundNum(e,n-1,c,o,r),s=!0),c<4&&null!=this.squares[n][c+1]&&e==(t=this.squares[n][c+1].getComponent("Square").num)&&(-1==o.indexOf(n+"#"+c)&&o.push(n+"#"+c),this.scanAroundNum(e,n,c+1,o,r),s=!0),c>0&&null!=this.squares[n][c-1]){var t=this.squares[n][c-1].getComponent("Square").num;e==t&&(-1==o.indexOf(n+"#"+c)&&o.push(n+"#"+c),this.scanAroundNum(e,n,c-1,o,r),s=!0)}s||this.squares[n][c].getComponent("Square").num==e&&-1==o.indexOf(n+"#"+c)&&o.push(n+"#"+c)}}},operateLogic:function(e,n,c){var o=new Array,r=new Array;this.scanAroundNum(e,n,c,o,r);var s=new Array;if(o.length>=3){for(var t in o){var u=o[t].split("#")[0],a=o[t].split("#")[1];this.squares[u][a].getComponent("Square").destorySquare(),this.squares[u][a]=null,-1==s.indexOf(a)&&s.push(a)}this.checkAndMoveSquares(s);var i=cc.delayTime(.2),l=cc.callFunc(function(){this.spawnSquares()}.bind(this)),h=cc.callFunc(function(){this.checkMovedSquares()}.bind(this)),d=cc.sequence(i,l,cc.delayTime(.3),h);this.node.runAction(d)}},checkAndMoveSquares:function(e){cc.log("colArr length:",e.length);for(var n in e){var c=e[n];cc.log("col:",c);for(var o=0;o<5;o++)if(null!=this.squares[o][c])for(var r=0;r<o;r++)if(null==this.squares[r][c]){this.squares[o][c].getComponent("Square").moveSquare(r,c),this.squares[r][c]=this.squares[o][c],this.squares[o][c]=null,-1==this.checkArr.indexOf(r+"#"+c)&&this.checkArr.push(r+"#"+c);break}}},checkMovedSquares:function(){for(var e in this.checkArr){var n=parseInt(this.checkArr[e].split("#")[0]),c=parseInt(this.checkArr[e].split("#")[1]),o=this.squares[n][c];if(null!==o){var r=o.getComponent("Square"),s=new Array,t=new Array;if(this.scanAroundNum(r.num,n,c,s,t),s.length>=3){this.operateLogic(r.num,n,c),this.checkArr=[];break}}}}}),cc._RF.pop()},{}],Global:[function(e,n,c){"use strict";cc._RF.push(n,"8f115FxpY1COZtFBCkMa8fo","Global"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],Square:[function(e,n,c){"use strict";cc._RF.push(n,"a9a84jwR/1DwKUFoNYLSIXp","Square");var o=e("Color");cc.Class({extends:cc.Component,properties:{numLabel:{default:null,type:cc.Label},num:0},onLoad:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(n){e.setNum(parseInt(e.numLabel.string)+1,!0)},this.node)},newSquare:function(e,n){var c=5+this.node.width/2+(this.node.width+5)*n,o=5+this.node.height/2+(this.node.height+5)*e;this.node.setPosition(cc.p(c,o)),this.node.setScale(0),this.node.runAction(cc.scaleTo(.1,1)),this.setArrPos(e,n)},destorySquare:function(){var e=cc.sequence(cc.scaleTo(.1,0),cc.callFunc(function(e){e.destroy()},this.node,this.node));this.node.runAction(e),this.game.squares[this.row][this.col]=null},setArrPos:function(e,n){this.row=e,this.col=n},moveSquare:function(e,n){this.row=e,this.col=n,this.setArrPos(e,n),this.node.stopAllActions();var c=5+this.node.width/2+(this.node.width+5)*n,o=5+this.node.height/2+(this.node.height+5)*e,r=cc.moveTo(.2,cc.p(c,o));this.node.runAction(r)},setNum:function(e,n){this.numLabel.string=e,this.num=e,this.setColor(e),n&&this.game.operateLogic(this.num,this.row,this.col)},setColor:function(e){switch(e){case 1:this.node.color=o.num1;break;case 2:this.node.color=o.num2;break;case 3:this.node.color=o.num3;break;case 4:this.node.color=o.num4;break;case 5:this.node.color=o.num5;break;case 6:this.node.color=o.num6;break;case 7:this.node.color=o.num7;break;case 8:this.node.color=o.num8;break;case 9:this.node.color=o.num9;break;case 10:this.node.color=o.num10;break;case 11:this.node.color=o.num11;break;case 12:this.node.color=o.num12;break;case 13:this.node.color=o.num13;break;case 14:this.node.color=o.num14;break;case 15:this.node.color=o.num15;break;case 16:this.node.color=o.num16;break;case 17:this.node.color=o.num17;break;case 18:this.node.color=o.num18;break;case 19:this.node.color=o.num19;break;case 20:this.node.color=o.num20;break;default:this.node.color=o.nums}}}),cc._RF.pop()},{Color:"Color"}],Start:[function(e,n,c){"use strict";cc._RF.push(n,"2187e/4apJF8rRCPZ1veJ4j","Start"),cc.Class({extends:cc.Component,properties:{nameLabel:cc.Node,bgSpr:cc.Node,startBtn:cc.Node,btnEffect:cc.AudioClip},onLoad:function(){var e=cc.repeatForever(cc.sequence(cc.scaleTo(1,1.5),cc.scaleTo(1,1)));this.nameLabel.runAction(e)},startGame:function(){cc.audioEngine.playEffect(this.btnEffect),cc.director.loadScene("GameScene")}}),cc._RF.pop()},{}]},{},["Color","Game","GameOver","Global","Square","Start"]);